为了保证消息队列中的消息不丢失，可以采取以下几种策略：

1. **消息持久化**：
   - 确保消息队列（Queue）是持久化的。在RabbitMQ中，可以通过设置`durable`参数为`true`来实现队列的持久化。
   - 确保消息（Message）是持久化的。在发送消息时，需要将消息的`deliveryMode`设置为`2`，即`PERSISTENT`，这样消息会被存储到磁盘上，即使RabbitMQ服务重启，消息也不会丢失。

2. **生产者确认机制**：
   - 在消息的生产阶段，使用请求确认机制来保证消息的可靠传递。当消息队列的客户端收到Broker的确认响应后，才能确认消息已经成功发送。

3. **消息重试机制**：
   - 对于发送失败的消息，消息队列可以配置重试机制，将消息重新放入队列以供再次处理。

4. **死信队列（Dead Letter Queue, DLQ）**：
   - 当消息无法被正常消费时（如消息TTL过期、队列达到最大长度、消息被拒绝且`requeue`设置为`false`），消息会成为死信，被发送到死信队列中，以便后续分析和处理。

5. **消息顺序性检测**：
   - 在消费端检测消息的连续性，确保消息没有丢失。对于Kafka和RocketMQ，可以在每个分区单独检测消息序号的连续性。

6. **合理配置消息队列参数**：
   - 配置刷盘和复制相关的参数，让消息写入到多个副本的磁盘上，以确保消息不会因为Broker宕机或磁盘损坏而丢失。

7. **消费确认机制**：
   - 在消费端，不要在收到消息后就立即发送消费确认，而是应该在执行完所有消费业务逻辑之后，再发送消费确认。

通过上述措施，可以最大程度地保证消息队列中的消息不丢失，提高系统的可靠性和稳定性。
