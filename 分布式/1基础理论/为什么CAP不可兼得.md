首先对于分布式系统来说，分区是必然存在的，所谓的分区指的是分布式系统可能出现的子区域网络不通，成为孤立区域的情况。

![](https://secure2.wostatic.cn/static/wR1xt6M7SHfJJH75kazSYx/image.png?auth_key=1732170655-27hu81QCPrLLWNQzAwkwXi-0-2196d846659df3494a0cbe5c69116e98)

那么分区容错性(P)就必须要满足，因为如果要牺牲分区容错性，就得把服务和资源放到一个机器，或者同一个“同生共死”的集群，就违背了分布式的初衷。

那么在满足分区容错的基础上，能不能同时满足**一致性**和**可用性**呢？

假设现在有两个分区N1 和 N2，N1和N2分别有不同的分区存储D1和D2，以及不同的服务S1和S2。

在满足“一致性”的时候，N1和N2的数据要求值一样，D1=D2。

在满足“可用性”的时候，无论访问N1还是N2都能获取及时的响应。

![](https://secure2.wostatic.cn/static/pWvAhvtAWkxfe4k9iCbW3v/image.png?auth_key=1732170655-9scrdiyX3t91fmznh8NF8U-0-376b4a4982ab28556319067f4605878b)

假设现在有这样的场景：

- 用户访问N1，修改了D1的数据
- 用户再次访问，请求落在N2，此时D1和D2的数据不一致

接下来：

- 保证一致性：此时D1和D2数据不一致，要保证一致性就不能返回不一致的数据，可用性无法保证
- 保证可用性：立即响应，可用性得到了保证，但是此时响应的数据和D1不一致，一致性无法保证



可以看出，分区容错的前提下，一致性和可用性是矛盾的

