# memory_test
```bash
 ./memory_test 
开始内存访问测试...

测试L1缓存访问...
测试顺序访问...
测试随机访问...

测试结果汇总:
----------------------------------------
        访问类型平均时间(ns)
----------------------------------------
      L1缓存访问          1.913
        顺序访问          8.219
        随机访问         40.146
----------------------------------------
```

# matrix_test
```bash
 ./matrix_test 
开始矩阵乘法测试 (矩阵大小: 1024x1024)

测试传统矩阵乘法...
测试分块矩阵乘法...

测试结果汇总:
----------------------------------------
        实现方式     耗时(ms)
----------------------------------------
        传统实现           3249
        分块优化           1108
----------------------------------------
结果验证: 正确
性能提升: 2.93x
```

# struct_test
```bash
./struct_test 
开始数据结构性能测试...

测试AoS结构...
测试SoA结构...

测试结果汇总:
----------------------------------------
        数据结构     耗时(ms)
----------------------------------------
                 AoS           7853
                 SoA           7694
----------------------------------------
SoA性能提升: 1.02x
```
# false_sharing_test
```bash
./false_sharing_test 
开始伪共享测试...

测试有伪共享的版本...
测试无伪共享的版本...

测试结果汇总:
----------------------------------------
        实现方式     耗时(ms)
----------------------------------------
        有伪共享            575
        无伪共享             72
----------------------------------------
性能提升: 7.99x
```

# numa_test
```bash
./numa_test 
NUMA节点数量: 2
CPU核心数量: 48
开始NUMA访问延迟测试...

测试本地内存访问...
测试远程内存访问...

测试结果汇总:
----------------------------------------
        访问类型平均延迟(ns)
----------------------------------------
        本地访问        12.9239
        远程访问        15.9235
----------------------------------------
远程访问惩罚: 1.23x
----------------------------------------
```

# numa_affinity_test
```bash
./numa_affinity_test 
NUMA节点数量: 2
CPU核心数量: 48

NUMA拓扑信息:
节点 0: 257292 MB 内存
    CPU核心: 0 2 4 6 8 10 12 14 16 18 20 22 24 26 28 30 32 34 36 38 40 42 44 46 
节点 1: 258042 MB 内存
    CPU核心: 1 3 5 7 9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43 45 47 

开始NUMA线程亲和性测试...

测试匹配的内存和线程亲和性...
测试不匹配的内存和线程亲和性...
测试无绑定的线程...

测试结果汇总:
----------------------------------------
     亲和性类型吞吐量(Mops/s)
----------------------------------------
     匹配亲和性        37.8788
  不匹配亲和性        46.8933
           无绑定        41.1946
----------------------------------------
不匹配惩罚: 0.81x
```

# numa_allocation_test
```bash
./numa_allocation_test
NUMA节点数量: 2
CPU核心数量: 48

NUMA拓扑信息:
节点 0: 257292 MB 内存
    CPU核心: 0 2 4 6 8 10 12 14 16 18 20 22 24 26 28 30 32 34 36 38 40 42 44 46 
节点 1: 258042 MB 内存
    CPU核心: 1 3 5 7 9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43 45 47 

开始NUMA内存分配策略测试...

测试本地内存分配...
测试交错内存分配...
测试远程内存分配...

测试结果汇总:
----------------------------------------
        分配策略   带宽(MB/s)
----------------------------------------
        本地分配       1.28e+10
        交错分配       1.28e+10
        远程分配    8.53333e+09
----------------------------------------
远程访问惩罚: 1.50x
```

当测试结果不符合预期的时候，可以检查以下几点：
1. 检查测试环境是否一致，包括硬件配置、编译器版本等。
2. 检查测试代码是否正确，包括数据结构、算法等。
3. 检查测试数据是否正确，包括数据规模、数据分布等。

1. 测试数据规模：
- 数据可能还能完全放入缓存中，没有触发大量缓存未命中

2. 测试方法：
- 访问模式相对简单 没有涉及到更复杂的数据访问模式

3. 编译器优化：
- -O2优化可能已经做了很好的向量化
- 现代编译器对AoS的优化已经很智能

4. 硬件因素：
- 现代CPU的预取机制很强大
- L1/L2缓存较大，可能掩盖了访问模式的差异